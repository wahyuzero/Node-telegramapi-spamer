const fs = require("fs");
const { default: axios } = require("axios");

const urls = [
    "https://api.telegram.org/bot7073742992:AAF3fBCHGAcvpPeHdt-xyfLC15xn8X-k02o/sendMessage?parse_mode=markdown&chat_id=6050538291&text=Bang-ada-Undangan-dari-mantan-nih",
    "https://api.telegram.org/bot6928730988:AAHKy88YEVBSX3Ne9AEExbJ7BwViDleRMqo/sendMessage?parse_mode=markdown&chat_id=6973831185&text=Bang-ada-Undangan-dari-mantan-nih",
];

async function sendMessage(urls) {
    try {
        const responses = await Promise.all(urls.map(url => axios.get(url)));
        responses.forEach(response => {
            if (response.status == 200) {
                logMessage(response.config.url, "OK");
            } else {
                logMessage(response.config.url, "Error");
            }
        });
    } catch (error) {
        console.error("API down!", error);
        logMessage(urls, "Error");
    }
}

function logMessage(url, status) {
    const logEntry = { url, status, timestamp: new Date().toISOString() };
    fs.appendFile("log.json", JSON.stringify(logEntry) + "\n", err => {
        if (err) {
            console.error("Error writing to log file:", err);
        }
    });
}

async function sendMessages() {
    try {
        while (true) {
            await sendMessage(urls);
            console.log("All messages sent successfully!");
        }
    } catch (error) {
        console.error("Error sending messages:", error);
        // Uncomment the line below if you want to retry on error
        await sendMessages();
    }
}


sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
sendMessages();
